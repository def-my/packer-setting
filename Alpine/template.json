{
    "builders": [{
        "type": "virtualbox-iso",
        "boot_command": [
            "root<enter><wait>",
            "ifconfig eth0 up && udhcpc -i eth0<enter><wait10>",
            "wget http://{{ .HTTPIP }}:{{ .HTTPPort }}/answers.cfg<enter><wait>",
            "setup-alpine -f $PWD/answers.cfg<enter><wait5>",
            "root<enter><wait>",
            "root<enter><wait>",
            "<wait60>y<enter>",
            "<wait300>",
            "mount /dev/sda3 /mnt<enter>",
            "echo 'PermitRootLogin yes' >> /mnt/etc/ssh/sshd_config<enter>",
            "umount /mnt<enter>",
            "reboot<enter>"
        ],
        "boot_wait": "20s",
        "communicator": "ssh",
        "disk_size": "10240",
        "guest_os_type": "Linux26_64",
        "headless": "true",
        "http_directory": "./",
        "iso_checksum": "a962e080a51d1114896f1a403142eb217052963e48e85e149e365e502d70bcf2",
        "iso_checksum_type": "sha256",
        "iso_url": "http://dl-cdn.alpinelinux.org/alpine/v3.10/releases/x86_64/alpine-standard-3.10.2-x86_64.iso",
        "shutdown_command": "/sbin/poweroff",
        "ssh_password": "root",
        "ssh_port": 22,
        "ssh_username": "root",
        "ssh_wait_timeout": "600000s",
        "vboxmanage": [
            ["modifyvm", "{{.Name}}", "--memory", "512"],
            ["modifyvm", "{{.Name}}", "--cpus", "1"]
        ]
    }, {
        "type": "vmware-iso",
        "boot_command": [
            "root<enter><wait>",
            "ifconfig eth0 up && udhcpc -i eth0<enter><wait10>",
            "wget http://{{ .HTTPIP }}:{{ .HTTPPort }}/answers.cfg<enter><wait>",
            "setup-alpine -f $PWD/answers.cfg<enter><wait5>",
            "root<enter><wait>",
            "root<enter><wait>",
            "<wait60>y<enter>",
            "<wait300>",
            "mount /dev/sda3 /mnt<enter>",
            "echo 'PermitRootLogin yes' >> /mnt/etc/ssh/sshd_config<enter>",
            "umount /mnt<enter>",
            "reboot<enter>"
        ],
        "boot_wait": "20s",
        "communicator": "ssh",
        "disk_size": "10240",
        "guest_os_type": "linux",
        "headless": "true",
        "http_directory": "./",
        "iso_checksum": "a962e080a51d1114896f1a403142eb217052963e48e85e149e365e502d70bcf2",
        "iso_checksum_type": "sha256",
        "iso_url": "http://dl-cdn.alpinelinux.org/alpine/v3.10/releases/x86_64/alpine-standard-3.10.2-x86_64.iso",
        "shutdown_command": "/sbin/poweroff",
        "ssh_password": "root",
        "ssh_port": 22,
        "ssh_username": "root",
        "ssh_wait_timeout": "600000s",
        "vmx_data": {
            "memsize": "512",
            "numvcpus": "1",
            "cpuid.coresPerSocket": "1"
        }
    }],
    "post-processors": [{
        "override": {
            "virtualbox": {
                "output": "./alpine-virtualbox.box"
            },
            "vmware": {
                "output": "./alpine-vmware.box"
            }
        },
        "type": "vagrant"
    }],
    "provisioners": [{
        "execute_command": "/bin/sh '{{.Path}}'",
        "override": {
            "virtualbox-iso": {
                "scripts": [
                    "scripts/base.sh",
                    "scripts/vagrant.sh",
                    "scripts/virtualbox.sh",
                    "scripts/cleanup.sh",
                    "scripts/zerodisk.sh"
                ]
            },
            "vmware-iso": {
                "scripts": [
                    "scripts/base.sh",
                    "scripts/vagrant.sh",
                    "scripts/vmware.sh",
                    "scripts/cleanup.sh",
                    "scripts/zerodisk.sh"
                ]
            }
        },
        "type": "shell"
    }]
}
